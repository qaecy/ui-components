<cue-flexcontainer
  class="wrap"
  gap="s"
  align="start"
  [direction]="flexDirection()"
  (mouseenter)="onContainerHovered()"
>
  @if(!hidden()){
  <!-- Main icon (unchanged) -->
  <cue-button
    [size]="size()"
    [variant]="variant()"
    [disabled]="mainIconDisabled()"
    [cueTooltip]="mainIconDisabled() ? '' : mainItem().label"
    [tooltipPlacement]="tooltipPlacement()"
    (click)="handleClick(0)"
    aria-label="Select"
    (mouseenter)="onMouseEnter()"
    (mouseover)="hovered = mainItem().id"
    (mouseleave)="hovered = undefined"
  >
    <cue-button-icon [icon]="mainItem().icon" />
  </cue-button>

  <!-- Remaining items -->
  @if(isExpanded() && otherItems().length){
  <div
    class="icon-container"
    [@iconAnimation]="isExpanded() ? 'visible' : 'hidden'"
  >
    <cue-flexcontainer
      class="overlay"
      gap="s"
      [direction]="flexDirection()"
      (mouseenter)="onContainerHovered()"
    >
      @for(item of otherItems(); track item.id; let idx = $index){
      <div
        class="btn delayed"
        (mouseover)="hovered = item.id"
        (mouseleave)="hovered = undefined"
      >
        <cue-button
          [size]="size()"
          [variant]="variant()"
          [cueTooltip]="item.label"
          [tooltipPlacement]="tooltipPlacement()"
          (click)="handleClick(idx + 1)"
        >
          <cue-button-icon [icon]="item.icon" />
        </cue-button>
      </div>
      }
    </cue-flexcontainer>
  </div>
  } }
</cue-flexcontainer>
