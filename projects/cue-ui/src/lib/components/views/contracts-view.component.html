<cue-flexcontainer style="flex: 1">
  <div class="panel left">
    <cue-container>
      <cue-flexcontainer direction="column">
        <!-- SEARCH BOX -->
        <cue-card variant="primary" style="overflow: hidden">
          <cue-flexcontainer direction="column">
            <ng-content select="[searchBefore]"></ng-content>
            <cue-search-bar-shadow variant="default">
              <cue-search-bar
                i18n-placeholder
                placeholder="Filter..."
                [debounceTime]="20"
                (valueChange)="setTableFilter($event)"
              />
            </cue-search-bar-shadow>
          </cue-flexcontainer>
        </cue-card>

        <!-- PROPERTIES -->
        @if(contractData(); as contract){
        <cue-card
          variant="accent"
          [scrollable]="true"
          [maxContentHeight]="true"
          style="flex: 1; min-height: 4em; margin-bottom: auto"
        >
          <cue-typography>
            <cue-flexcontainer [direction]="'row'" [justify]="'space-between'">
              <cue-button (click)="togglePDF()" i18n>{{
                showPDF() ? "Hide PDF" : "Show PDF"
              }}</cue-button>
              <cue-button (click)="toggleHideEmpty()" i18n>{{
                !hideEmptyValues() ? "Hide empty values" : "Show empty values"
              }}</cue-button>
            </cue-flexcontainer>
          </cue-typography>
          <br />
          <cue-key-val-list>
            @for(item of contract.general; track $index; ; let idx = $index){
            <cue-key-val
              i18n-key
              [size]="item.size"
              [key]="item.key"
              [val]="item.value"
            ></cue-key-val>
            }
            <cue-typography weight="semibold" i18n>{{contract.parties.length ? 'Parties' : 'No Parties found'}}</cue-typography>
            @for(item of contract.parties; track $index; ; let idx = $index){
            <cue-key-val
              i18n-key
              [size]="item.size"
              [key]="item.key"
              [val]="item.value"
            ></cue-key-val>
            }
            <cue-typography weight="semibold" i18n>{{contract.obligations.length ? 'Obligations' : 'No Obligations found'}}</cue-typography>
            @for(item of contract.obligations; track $index; ; let idx =
            $index){
            <cue-key-val
              i18n-key
              [size]="item.size"
              [key]="item.key"
              [val]="item.value"
            ></cue-key-val>
            }
          </cue-key-val-list>
        </cue-card>
        }
      </cue-flexcontainer>
    </cue-container>
  </div>

  <div class="panel right">
    <cue-card style="flex: 1" [scrollable]="true">
      <!-- TABLE -->
      @if(!showPDF()){
      <cue-table
        [data]="tableData()"
        [filterValue]="filterValue()"
        [clickableRows]="true"
        (clickedRow)="handleRowClick($event)"
        [columnDefs]="columnDefs"
        [displayFilter]="false"
        tooltipCol="summary"
      ></cue-table>
      } @else{
      <cue-pdf-viewer
        style="height: 100%; width: 100%"
        [src]="pdfURL()"
        [original-size]="false"
      ></cue-pdf-viewer>
      }
    </cue-card>
  </div>
</cue-flexcontainer>
